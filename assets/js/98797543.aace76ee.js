"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[7896],{23592:(e,s,a)=>{a.r(s),a.d(s,{assets:()=>d,contentTitle:()=>r,default:()=>p,frontMatter:()=>c,metadata:()=>h,toc:()=>m});var n=a(17624),t=a(4552),l=a(38888),i=a(87768);const c={title:"Buy a Batch of Stamps",id:"buy-a-stamp-batch"},r=void 0,h={id:"develop/access-the-swarm/buy-a-stamp-batch",title:"Buy a Batch of Stamps",description:"Swarm comprises the sum total of all storage space provided by all of our nodes, called the DISC (Distributed Immutable Store of Chunks). The right to write data into this distributed store is determined by the postage stamps that have been attached.",source:"@site/docs/develop/access-the-swarm/buy-a-stamp-batch.md",sourceDirName:"develop/access-the-swarm",slug:"/develop/access-the-swarm/buy-a-stamp-batch",permalink:"/docs/develop/access-the-swarm/buy-a-stamp-batch",draft:!1,unlisted:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/access-the-swarm/buy-a-stamp-batch.md",tags:[],version:"current",frontMatter:{title:"Buy a Batch of Stamps",id:"buy-a-stamp-batch"},sidebar:"develop",previous:{title:"Introduction",permalink:"/docs/develop/access-the-swarm/introduction"},next:{title:"Upload and Download",permalink:"/docs/develop/access-the-swarm/upload-and-download"}},d={},m=[{value:"Fund your node&#39;s wallet.",id:"fund-your-nodes-wallet",level:2},{value:"API",id:"api",level:4},{value:"Swarm CLI",id:"swarm-cli",level:4},{value:"What is a stamp batch?",id:"what-is-a-stamp-batch",level:2},{value:"Amount",id:"amount",level:2},{value:"Batch Depth",id:"batch-depth",level:2},{value:"Setting stamp batch parameters and options",id:"setting-stamp-batch-parameters-and-options",level:2},{value:"Choosing a <code>depth</code>",id:"choosing-a-depth",level:3},{value:"Calculating <code>amount</code> needed for desired TTL",id:"calculating-amount-needed-for-desired-ttl",level:3},{value:"Mutable of Immutable?",id:"mutable-of-immutable",level:3},{value:"Buying a stamp batch",id:"buying-a-stamp-batch",level:2},{value:"API",id:"api-1",level:4},{value:"Swarm CLI",id:"swarm-cli-1",level:4},{value:"API",id:"api-2",level:4},{value:"Swarm CLI",id:"swarm-cli-2",level:4},{value:"Checking the remaining TTL (time to live) of your batch",id:"checking-the-remaining-ttl-time-to-live-of-your-batch",level:2},{value:"API",id:"api-3",level:4},{value:"Swarm CLI",id:"swarm-cli-3",level:4},{value:"Top up your batch",id:"top-up-your-batch",level:2},{value:"API",id:"api-4",level:4},{value:"Swarm CLI",id:"swarm-cli-4",level:4},{value:"Dilute your batch",id:"dilute-your-batch",level:2},{value:"API",id:"api-5",level:4},{value:"Swarm CLI",id:"swarm-cli-5",level:4},{value:"Stewardship",id:"stewardship",level:2}];function o(e){const s={a:"a",admonition:"admonition",annotation:"annotation",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msup:"msup",mtext:"mtext",p:"p",pre:"pre",semantics:"semantics",span:"span",...(0,t.M)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(s.p,{children:["Swarm comprises the sum total of all storage space provided by all of our nodes, called the DISC (Distributed Immutable Store of Chunks). The ",(0,n.jsx)(s.em,{children:"right to write"})," data into this distributed store is determined by the ",(0,n.jsx)(s.a,{href:"/docs/learn/technology/contracts/postage-stamp",children:"postage stamps"})," that have been attached."]}),"\n",(0,n.jsx)(s.h2,{id:"fund-your-nodes-wallet",children:"Fund your node's wallet."}),"\n",(0,n.jsxs)(s.p,{children:["To start up your node, you will already have provided your node with\nxDAI for gas and xBZZ which was transferred into your chequebook when\nyour node was initialised. This will be used to interact with other\nnodes using the ",(0,n.jsx)(s.em,{children:"SWAP"})," protocol. In order to access more funds to buy\nbatches of stamps, your wallet must be funded with xBZZ. The easiest\nway to achieve this is to withdraw funds from your chequebook:"]}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api",children:"API"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl -XPOST "http://localhost:1635/chequebook/withdraw?amount=1000" \n'})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'{\n  "transactionHash": "0xce73b9962e41ee0adcf5926663312093a3c292a8338ff641a70224ac32a04945"\n}\n\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli",children:"Swarm CLI"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli cheque withdraw 1000\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Tx: 0x2326d5b8e568bf2689d5a112427018c19858efcafadc7e5d3ddc7dae882d11f0\n"})})]})]}),"\n",(0,n.jsx)(s.h2,{id:"what-is-a-stamp-batch",children:"What is a stamp batch?"}),"\n",(0,n.jsx)(s.p,{children:"Stamp batches must be purchased and then utilised in order to upload data to swarm."}),"\n",(0,n.jsxs)(s.p,{children:["Stamp batches are created in buckets with a ",(0,n.jsx)(s.code,{children:"bucket depth"})," of 16. The entire Swarm address space is divided into ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"b"}),(0,n.jsx)(s.mi,{children:"u"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"k"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"D"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"p"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"h"})]})]}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsx)(s.mn,{children:"16"})]}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"65"}),(0,n.jsx)(s.mo,{separator:"true",children:","}),(0,n.jsx)(s.mn,{children:"536"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{bucketDepth} = 2^{16} = 65,536"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8491em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8491em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(s.span,{className:"mord mtight",children:[(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"b"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"u"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"De"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"pt"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})})})})})]}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8141em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8141em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:"16"})})})]})})})})})]}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8389em",verticalAlign:"-0.1944em"}}),(0,n.jsx)(s.span,{className:"mord",children:"65"}),(0,n.jsx)(s.span,{className:"mpunct",children:","}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,n.jsx)(s.span,{className:"mord",children:"536"})]})]})]})," different buckets. When uploaded, each of your files are split into 4kb chunks and assigned to a specific bucket based on its address. When a chunk gets assigned to a bucket, we can say that the chunk has been 'stamped', and that one stamp has been utilized from the postage stamp batch."]}),"\n",(0,n.jsxs)(s.p,{children:["When creating a batch there are two required parameters, ",(0,n.jsx)(s.code,{children:"batch depth"})," and ",(0,n.jsx)(s.code,{children:"amount"}),", which are explained below."]}),"\n",(0,n.jsxs)(s.p,{children:["You can learn more about stamp batches on the ",(0,n.jsx)(s.a,{href:"/docs/learn/technology/contracts/postage-stamp",children:"postage stamp contract page"}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"amount",children:"Amount"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"amount"})," is the quantity of xBZZ in PLUR ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mo,{stretchy:"false",children:"("}),(0,n.jsx)(s.mn,{children:"1"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"1"}),(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"0"}),(0,n.jsx)(s.mn,{children:"16"})]}),(0,n.jsx)(s.mi,{children:"P"}),(0,n.jsx)(s.mi,{children:"L"}),(0,n.jsx)(s.mi,{children:"U"}),(0,n.jsx)(s.mi,{children:"R"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"1"}),(0,n.jsx)(s.mtext,{children:"\xa0xBZZ"}),(0,n.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"(1 \\times 10^{16}PLUR = 1 \\text{ xBZZ})"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mopen",children:"("}),(0,n.jsx)(s.span,{className:"mord",children:"1"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8141em"}}),(0,n.jsx)(s.span,{className:"mord",children:"1"}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"0"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8141em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:"16"})})})]})})})})})]}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"LU"}),(0,n.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.00773em"},children:"R"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord",children:"1"}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"\xa0xBZZ"})}),(0,n.jsx)(s.span,{className:"mclose",children:")"})]})]})]})," that is assigned per chunk in the batch. The total number of xBZZ that will be paid for the batch is calculated from this figure and the ",(0,n.jsx)(s.code,{children:"batch depth"})," like so:"]}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"b"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"h"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"d"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"p"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"h"})]})]}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"m"}),(0,n.jsx)(s.mi,{children:"o"}),(0,n.jsx)(s.mi,{children:"u"}),(0,n.jsx)(s.mi,{children:"n"}),(0,n.jsx)(s.mi,{children:"t"})]})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{batch \\_ depth} \\times {amount}"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.9324em",verticalAlign:"-0.0833em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8491em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(s.span,{className:"mord mtight",children:[(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"ba"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,n.jsx)(s.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"pt"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})})})})})]}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6151em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord mathnormal",children:"am"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"o"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"u"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"n"}),(0,n.jsx)(s.span,{className:"mord mathnormal",children:"t"})]})]})]})]})}),"\n",(0,n.jsxs)(s.p,{children:["The paid xBZZ forms the ",(0,n.jsx)(s.code,{children:"balance"})," of the batch. This ",(0,n.jsx)(s.code,{children:"balance"})," is then slowly depleted as time ticks on and blocks are mined on Gnosis Chain."]}),"\n",(0,n.jsxs)(s.p,{children:["For example, with a ",(0,n.jsx)(s.code,{children:"batch depth"})," of 24 and an ",(0,n.jsx)(s.code,{children:"amount"})," of 1000000000 PLUR:"]}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsx)(s.mn,{children:"24"})]}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mn,{children:"1000000000"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"16777216000000000"}),(0,n.jsx)(s.mtext,{children:"\xa0PLUR"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"1.6777216"}),(0,n.jsx)(s.mtext,{children:"\xa0xBZZ"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{24} \\times 1000000000 = 16777216000000000 \\text{ PLUR} = 1.6777216 \\text{ xBZZ}"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.9474em",verticalAlign:"-0.0833em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8641em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:(0,n.jsx)(s.span,{className:"mord mtight",children:"24"})})})]})})})})})]}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"1000000000"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"16777216000000000"}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"\xa0PLUR"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6833em"}}),(0,n.jsx)(s.span,{className:"mord",children:"1.6777216"}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"\xa0xBZZ"})})]})]})]})}),"\n",(0,n.jsx)(s.h2,{id:"batch-depth",children:"Batch Depth"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"batch depth"})," determines ",(0,n.jsx)(s.em,{children:"how many chunks"})," are allowed to be in each bucket. The number of chunks allowed in each bucket is calculated like so:\n",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsx)(s.mrow,{children:(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"b"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"h"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"d"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"p"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"h"}),(0,n.jsx)(s.mo,{children:"\u2212"}),(0,n.jsx)(s.mi,{children:"b"}),(0,n.jsx)(s.mi,{children:"u"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"k"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"d"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"p"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"h"})]})]})}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{batch \\_ depth - bucket \\_ depth}"})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8491em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8491em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(s.span,{className:"mord mtight",children:[(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"ba"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,n.jsx)(s.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"pt"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,n.jsx)(s.span,{className:"mbin mtight",children:"\u2212"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"b"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"u"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,n.jsx)(s.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"pt"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"})]})})]})})})})})]})]})})]}),"  ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsx)(s.mrow,{children:(0,n.jsx)(s.mo,{children:"="})}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"="})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.3669em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="})]})})]})," ",(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsx)(s.mrow,{children:(0,n.jsxs)(s.msup,{children:[(0,n.jsx)(s.mn,{children:"2"}),(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mi,{children:"b"}),(0,n.jsx)(s.mi,{children:"a"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"c"}),(0,n.jsx)(s.mi,{children:"h"}),(0,n.jsx)(s.mi,{mathvariant:"normal",children:"_"}),(0,n.jsx)(s.mi,{children:"d"}),(0,n.jsx)(s.mi,{children:"e"}),(0,n.jsx)(s.mi,{children:"p"}),(0,n.jsx)(s.mi,{children:"t"}),(0,n.jsx)(s.mi,{children:"h"}),(0,n.jsx)(s.mo,{children:"\u2212"}),(0,n.jsx)(s.mn,{children:"16"})]})]})}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"2^{batch \\_ depth - 16}"})]})})}),(0,n.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8491em"}}),(0,n.jsxs)(s.span,{className:"mord",children:[(0,n.jsx)(s.span,{className:"mord",children:"2"}),(0,n.jsx)(s.span,{className:"msupsub",children:(0,n.jsx)(s.span,{className:"vlist-t",children:(0,n.jsx)(s.span,{className:"vlist-r",children:(0,n.jsx)(s.span,{className:"vlist",style:{height:"0.8491em"},children:(0,n.jsxs)(s.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[(0,n.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,n.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,n.jsxs)(s.span,{className:"mord mtight",children:[(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"ba"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"t"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"c"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,n.jsx)(s.span,{className:"mord mtight",style:{marginRight:"0.02778em"},children:"_"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"d"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"e"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"pt"}),(0,n.jsx)(s.span,{className:"mord mathnormal mtight",children:"h"}),(0,n.jsx)(s.span,{className:"mbin mtight",children:"\u2212"}),(0,n.jsx)(s.span,{className:"mord mtight",children:"16"})]})})]})})})})})]})]})})]}),"."]}),"\n",(0,n.jsx)(s.h2,{id:"setting-stamp-batch-parameters-and-options",children:"Setting stamp batch parameters and options"}),"\n",(0,n.jsxs)(s.p,{children:["When purchasing a batch of stamps there are several parameters and options which must be considered. The ",(0,n.jsx)(s.code,{children:"depth"})," parameter will control how many chunks can be uploaded with a batch of stamps. The ",(0,n.jsx)(s.code,{children:"amount"})," parameter determines how much xBZZ will be allocated per chunk, and therefore also controls how long the chunks will be stored. While the ",(0,n.jsx)(s.code,{children:"immutable"})," header option sets the batch as either mutable or immutable, which can significantly alter the behavior of the batch utilisation (more details below)."]}),"\n",(0,n.jsxs)(s.h3,{id:"choosing-a-depth",children:["Choosing a ",(0,n.jsx)(s.code,{children:"depth"})]}),"\n",(0,n.jsx)(s.p,{children:"One notable aspect of batch utilization is that the entire batch is considered fully utilized as soon as any one of its buckets are filled. This means that the actual amount of chunks storable by a batch is less than the nominal maximum amount."}),"\n",(0,n.jsxs)(s.p,{children:["See the ",(0,n.jsx)(s.a,{href:"/docs/learn/technology/contracts/postage-stamp#batch-utilisation",children:"postage stamp contract page"})," for a more complete explanation of how batch utilisation works and a ",(0,n.jsx)(s.a,{href:"/docs/learn/technology/contracts/postage-stamp#effective-utilisation-table",children:"table"})," with the specific amounts of data which can be safely uploaded for each ",(0,n.jsx)(s.code,{children:"depth"})," value."]}),"\n",(0,n.jsxs)(s.h3,{id:"calculating-amount-needed-for-desired-ttl",children:["Calculating ",(0,n.jsx)(s.code,{children:"amount"})," needed for desired TTL"]}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)(s.code,{children:"amount"})," you specify determines how much xBZZ denominated in PLUR will be assigned per chunk uploaded. This governs the amount of time your chunks live on Swarm. While stamp prices are currently set at 24000 PLUR / chunk / block, prices will become variable in the future. When this comes into effect it will not possible to predict with accuracy exactly when your chunks will run out of balance, however, it can be estimated based on the current price and the remaining batch balance. The desired ",(0,n.jsx)(s.code,{children:"amount"})," can be easily estimated based on the current postage stamp price and the desired amount of storage time in seconds with the given Gnosis block time of 5 seconds and stamp price of 24000 PLUR / chunk / block:"]}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mo,{stretchy:"false",children:"("}),(0,n.jsx)(s.mtext,{children:"stamp\xa0price"}),(0,n.jsx)(s.mo,{children:"\xf7"}),(0,n.jsx)(s.mtext,{children:"block\xa0time\xa0in\xa0seconds"}),(0,n.jsx)(s.mo,{stretchy:"false",children:")"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mtext,{children:"storage\xa0time\xa0in\xa0seconds"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"(\\text{stamp price} \\div \\text{block time in seconds}) \\times \\text{storage time in seconds}"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mopen",children:"("}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"stamp\xa0price"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xf7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"block\xa0time\xa0in\xa0seconds"})}),(0,n.jsx)(s.span,{className:"mclose",children:")"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"storage\xa0time\xa0in\xa0seconds"})})]})]})]})}),"\n",(0,n.jsxs)(s.p,{children:["There are 1036800 seconds in 12 days, so the ",(0,n.jsx)(s.code,{children:"amount"})," value required to store for 12 days can be calculated:"]}),"\n",(0,n.jsx)(s.span,{className:"katex-display",children:(0,n.jsxs)(s.span,{className:"katex",children:[(0,n.jsx)(s.span,{className:"katex-mathml",children:(0,n.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:(0,n.jsxs)(s.semantics,{children:[(0,n.jsxs)(s.mrow,{children:[(0,n.jsx)(s.mo,{stretchy:"false",children:"("}),(0,n.jsx)(s.mtext,{children:"24000"}),(0,n.jsx)(s.mo,{children:"\xf7"}),(0,n.jsx)(s.mtext,{children:"5"}),(0,n.jsx)(s.mo,{stretchy:"false",children:")"}),(0,n.jsx)(s.mo,{children:"\xd7"}),(0,n.jsx)(s.mtext,{children:"1036800"}),(0,n.jsx)(s.mo,{children:"="}),(0,n.jsx)(s.mn,{children:"4976640000"})]}),(0,n.jsx)(s.annotation,{encoding:"application/x-tex",children:"(\\text{24000} \\div \\text{5}) \\times \\text{1036800} = 4976640000"})]})})}),(0,n.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mopen",children:"("}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"24000"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xf7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"5"})}),(0,n.jsx)(s.span,{className:"mclose",children:")"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,n.jsx)(s.span,{className:"mbin",children:"\xd7"}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord text",children:(0,n.jsx)(s.span,{className:"mord",children:"1036800"})}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,n.jsx)(s.span,{className:"mrel",children:"="}),(0,n.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,n.jsxs)(s.span,{className:"base",children:[(0,n.jsx)(s.span,{className:"strut",style:{height:"0.6444em"}}),(0,n.jsx)(s.span,{className:"mord",children:"4976640000"})]})]})]})}),"\n",(0,n.jsxs)(s.p,{children:["So we can use 4976640000 as our ",(0,n.jsx)(s.code,{children:"amount"})," value in order for our postage batch to store data for 12 days."]}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"The postage stamp price is currently set at 24000 PLUR, but may change to a dynamic pricing model in the future. Once a dynamic pricing model has been implement, TTL values can only be taken as estimates and may change over time."})}),"\n",(0,n.jsx)(s.h3,{id:"mutable-of-immutable",children:"Mutable of Immutable?"}),"\n",(0,n.jsxs)(s.p,{children:["Depending on the use case, uploaders may desire to use mutable or immutable batches. The fundamental difference between immutable and mutable batches is that immutable batches become unusable once their capacity is filled, while for mutable batches, once their capacity is filled, they may continue to be used, however older chunks of data will be overwritten with the newer once over capacity. The default batch type is immutable. In order to set the batch type to mutable, the ",(0,n.jsx)(s.code,{children:"immutable"})," header should be set to ",(0,n.jsx)(s.code,{children:"false"}),". See ",(0,n.jsx)(s.a,{href:"/docs/learn/technology/contracts/postage-stamp#which-type-of-batch-to-use",children:"this section on postage stamp batch utilisation"})," to learn more about mutable vs immutable batches, and about which type may be right for your use case."]}),"\n",(0,n.jsx)(s.h2,{id:"buying-a-stamp-batch",children:"Buying a stamp batch"}),"\n",(0,n.jsx)(s.admonition,{type:"warning",children:(0,n.jsxs)(s.p,{children:["When you purchase a batch of stamps, you agree to burn xBZZ. Although your 'balance' slowly decrements as time goes on, there is no way to withdraw xBZZ from a batch. This is an outcome of Swarm's decentralised design, to read more about the different components of Swarm fit together, read ",(0,n.jsx)("a",{href:"https://www.ethswarm.org/The-Book-of-Swarm.pdf",target:"_blank",rel:"noopener noreferrer",children:"The Book of Swarm"})," ."]})}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api-1",children:"API"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl -s -XPOST http://localhost:1635/stamps/100000000/20\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'{\n  "batchID": "8fcec40c65841e0c3c56679315a29a6495d32b9ed506f2757e03cdd778552c6b",\n  "txHash": "0x51c77ac171efd930eca8f3a77e3fcd5aca0a7353b84d5562f8e9c13f5907b675"\n}\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli-1",children:"Swarm CLI"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp buy --depth 20 --amount 100000000\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Estimated cost: 0.010 BZZ\nEstimated capacity: 4.00 GB\nEstimated TTL: 5 hours 47 minutes 13 seconds\nType: Mutable\nWhen a mutable stamp reaches full capacity, it still permits new content uploads. However, this comes with the caveat of overwriting previously uploaded content associated with the same stamp.\n? Confirm the purchase Yes\nStamp ID: f4b9830676f4eeed4982c051934e64113dc348d7f5d2ab4398d371be0fbcdbf5\n"})})]})]}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"Once your batch has been purchased, it will take a few minutes for other Bee nodes in the Swarm to catch up and register your batch. Allow some time for your batch to propagate in the network before proceeding to the next step."})}),"\n",(0,n.jsx)(s.p,{children:"Look out for more ways to more accurately estimate the correct size of your batch coming soon!"}),"\n",(0,n.jsx)(s.p,{children:"To check on your stamps, send a GET request to the stamp endpoint."}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api-2",children:"API"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl http://localhost:1635/stamps\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'{\n  "stamps": [\n    {\n      "batchID": "f4b9830676f4eeed4982c051934e64113dc348d7f5d2ab4398d371be0fbcdbf5",\n      "utilization": 0,\n      "usable": true,\n      "label": "",\n      "depth": 20,\n      "amount": "100000000",\n      "bucketDepth": 16,\n      "blockNumber": 30643611,\n      "immutableFlag": true,\n      "exists": true,\n      "batchTTL": 20588,\n      "expired": false\n    }\n  ]\n}\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli-2",children:"Swarm CLI"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp list\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Stamp ID: f4b9830676f4eeed4982c051934e64113dc348d7f5d2ab4398d371be0fbcdbf5\nUsage: 0%\nRemaining Capacity: 4.00 GB\nTTL: 5 hours 42 minutes 18 seconds\nExpires: 2023-10-26\n\n"})})]})]}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"When uploading content which has been stamped using an already expired postage stamp, the node will not attempt to sync the content. You are advised to use longer-lived postage stamps and encrypt your content to work around this. It is not possible to reupload unencrypted content which was stamped using an expired postage stamp. We're working on improving on this."})}),"\n",(0,n.jsx)(s.h2,{id:"checking-the-remaining-ttl-time-to-live-of-your-batch",children:"Checking the remaining TTL (time to live) of your batch"}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsx)(s.p,{children:"At present, TTL is a primitive calculation based on the current storage price and the assumption that storage price will remain static in the future. As more data is uploaded into Swarm, the price of storage will begin to increase. For data that it is important to keep alive, make sure your batches have plenty of time to live!"})}),"\n",(0,n.jsxs)(s.p,{children:["In order to make sure your ",(0,n.jsx)(s.em,{children:"batch"})," has sufficient ",(0,n.jsx)(s.em,{children:"remaining balance"})," to be stored and served by nodes in its ",(0,n.jsx)(s.a,{href:"/docs/learn/glossary#2-area-of-responsibility-related-depths",children:(0,n.jsx)(s.em,{children:"area of responsibility"})}),", you must regularly check on its ",(0,n.jsx)(s.em,{children:"time to live"})," and act accordingly. The ",(0,n.jsx)(s.em,{children:"time to live"})," is the number of seconds before the chunks will be considered for garbage collection by nodes in the network."]}),"\n",(0,n.jsxs)(s.p,{children:["The remaining ",(0,n.jsx)(s.em,{children:"time to live"})," in seconds is shown in the API in the returned json object as the value for ",(0,n.jsx)(s.code,{children:"batchTTL"}),", and with Swarm CLI you will see the formatted TTL as the ",(0,n.jsx)(s.code,{children:"TTL"})," value."]}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api-3",children:"API"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl http://localhost:1635/stamps\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'{\n  "stamps": [\n    {\n      "batchID": "f4b9830676f4eeed4982c051934e64113dc348d7f5d2ab4398d371be0fbcdbf5",\n      "utilization": 0,\n      "usable": true,\n      "label": "",\n      "depth": 20,\n      "amount": "100000000",\n      "bucketDepth": 16,\n      "blockNumber": 30643611,\n      "immutableFlag": true,\n      "exists": true,\n      "batchTTL": 20588,\n      "expired": false\n    }\n  ]\n}\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli-3",children:"Swarm CLI"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp list\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Stamp ID: f4b9830676f4eeed4982c051934e64113dc348d7f5d2ab4398d371be0fbcdbf5\nUsage: 0%\nRemaining Capacity: 4.00 GB\nTTL: 5 hours 42 minutes 18 seconds\nExpires: 2023-10-26\n\n"})})]})]}),"\n",(0,n.jsx)(s.h2,{id:"top-up-your-batch",children:"Top up your batch"}),"\n",(0,n.jsx)(s.admonition,{type:"danger",children:(0,n.jsx)(s.p,{children:"Don't let your batch run out! If it does, you will need to restamp and resync your content."})}),"\n",(0,n.jsx)(s.p,{children:"If your batch is starting to run out, or you would like to extend the life of your batch to protect against storage price rises, you can increase the batch TTL by topping up your batch using the stamps endpoint, passing in the relevant batchID into the HTTP PATCH request."}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api-4",children:"API"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl -X PATCH "http://localhost:1635/stamps/topup/6d32e6f1b724f8658830e51f8f57aa6029f82ee7a30e4fc0c1bfe23ab5632b27/10000000"\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli-4",children:"Swarm CLI"}),(0,n.jsx)(s.p,{children:"List available stamps."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp list\n"})}),(0,n.jsx)(s.p,{children:"Copy stamp ID."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Stamp ID: daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\nUsage: 13%\nRemaining Capacity: 3.50 GB\nTTL: 183 days 1 hour 37 minutes 8 seconds\nExpires: 2024-05-02\n"})}),(0,n.jsxs)(s.p,{children:["Use ",(0,n.jsx)(s.code,{children:"swarm-cli stamp topup"})," with the ",(0,n.jsx)(s.code,{children:"--amount"})," and ",(0,n.jsx)(s.code,{children:"--stamp"})," parameters set with the amount to topup in PLUR and the stamp ID."]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp topup --amount 10000000  --stamp daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa\n4ea660de66aa62db\n"})}),(0,n.jsx)(s.p,{children:"Wait for topup transaction to complete."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"\u2b21 \u2b21 \u2b22 Topup in progress. This may take a while.\nStamp ID: daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\nDepth: 20\nAmount: 100000001000\n"})})]})]}),"\n",(0,n.jsx)(s.h2,{id:"dilute-your-batch",children:"Dilute your batch"}),"\n",(0,n.jsx)(s.p,{children:'In order to store more data with a batch of stamps, you must "dilute" the batch. Dilution simply refers to increasing the depth of the batch, thereby allowing it to store a greater number of chunks. As dilution only increases the the depth of a batch and does not automatically top up the batch with more xBZZ, dilution will decrease the TTL of the batch. Therefore if you wish to store more with your batch but don\'t want to decrease its TTL, you will need to both dilute and top up your batch with more xBZZ.'}),"\n",(0,n.jsxs)(l.c,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],children:[(0,n.jsxs)(i.c,{value:"api",children:[(0,n.jsx)(s.h4,{id:"api-5",children:"API"}),(0,n.jsxs)(s.p,{children:["Here we call the ",(0,n.jsx)(s.code,{children:"/stamps"})," endpoint and find a batch with ",(0,n.jsx)(s.code,{children:"depth"})," 24 and a ",(0,n.jsx)(s.code,{children:"batchTTL"})," of 2083223 which we wish to dilute:"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl  http://localhost:1635/stamps\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n    "stamps": [\n        {\n            "batchID": "0e4dd16cc435730a25ba662eb3da46e28d260c61c31713b6f4abf8f8c2548ae5",\n            "utilization": 0,\n            "usable": true,\n            "label": "",\n            "depth": 24,\n            "amount": "10000000000",\n            "bucketDepth": 16,\n            "blockNumber": 29717348,\n            "immutableFlag": false,\n            "exists": true,\n            "batchTTL": 2083223,\n            "expired": false\n        }\n    ]\n}\n'})}),(0,n.jsxs)(s.p,{children:["Next we call the ",(0,n.jsx)(s.a,{href:"/api/#tag/Postage-Stamps/paths/~1stamps~1dilute~1%7Bbatch_id%7D~1%7Bdepth%7D/patch",children:(0,n.jsx)(s.code,{children:"dilute"})})," endpoint to increase the ",(0,n.jsx)(s.code,{children:"depth"})," of the batch using the ",(0,n.jsx)(s.code,{children:"batchID"})," and our new ",(0,n.jsx)(s.code,{children:"depth"})," of 26:"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl -s -XPATCH http://localhost:1635/stamps/dilute/0e4dd16cc435730a25ba662eb3da46e28d260c61c31713b6f4abf8f8c2548ae5/26\n"})}),(0,n.jsxs)(s.p,{children:["And a ",(0,n.jsx)(s.code,{children:"txHash"})," of our successful transaction:"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'{\n    "batchID": "0e4dd16cc435730a25ba662eb3da46e28d260c61c31713b6f4abf8f8c2548ae5",\n    "txHash": "0x298e80358b3257292752edb2535a1cd84440c074451b61f78fab349aea4962b7"\n}\n'})}),(0,n.jsxs)(s.p,{children:["And finally we use the ",(0,n.jsx)(s.code,{children:"/stamps"})," endpoint again to confirm the new ",(0,n.jsx)(s.code,{children:"depth"})," and decreased ",(0,n.jsx)(s.code,{children:"batchTTL"}),":"]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"curl  http://localhost:1635/stamps\n"})}),(0,n.jsxs)(s.p,{children:["We can see the new ",(0,n.jsx)(s.code,{children:"depth"})," of 26 and a decreased ",(0,n.jsx)(s.code,{children:"batchTTL"})," of 519265."]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n    "stamps": [\n        {\n            "batchID": "0e4dd16cc435730a25ba662eb3da46e28d260c61c31713b6f4abf8f8c2548ae5",\n            "utilization": 0,\n            "usable": true,\n            "label": "",\n            "depth": 26,\n            "amount": "10000000000",\n            "bucketDepth": 16,\n            "blockNumber": 29717348,\n            "immutableFlag": false,\n            "exists": true,\n            "batchTTL": 519265,\n            "expired": false\n        }\n    ]\n}\n'})})]}),(0,n.jsxs)(i.c,{value:"swarm-cli",children:[(0,n.jsx)(s.h4,{id:"swarm-cli-5",children:"Swarm CLI"}),(0,n.jsxs)(s.p,{children:["List available stamps, make sure to use the ",(0,n.jsx)(s.code,{children:"--verbose"})," flag so that we can see the batch depth."]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp list --verbose\n"})}),(0,n.jsx)(s.p,{children:"We have a stamp batch with depth 20 we want to dilute. Copy stamp ID of that batch."}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"Listing postage stamps...\nStamp ID: daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\nUsage: 13%\nRemaining Capacity: 3.50 GB\nTotal Capacity (mutable): 4.00 GB\nTTL: 182 days 4 hours 39 minutes 47 seconds\nExpires: 2024-05-02\nDepth: 20\nBucket Depth: 16\nAmount: 100010002000\nUsable: true\nUtilization: 2\nBlock Number: 29734329\n"})}),(0,n.jsxs)(s.p,{children:["Use ",(0,n.jsx)(s.code,{children:"swarm-cli stamp dilute"})," with the ",(0,n.jsx)(s.code,{children:"--depth"})," and ",(0,n.jsx)(s.code,{children:"--stamp"})," parameters set with the desired new depth and the stamp ID."]}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"swarm-cli stamp dilute --depth 21 --stamp daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\n"})}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:"\u2b21 \u2b21 \u2b22 Dilute in progress. This may take a while.\nStamp ID: daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\nDepth: 20\nAmount: 100010002000\n"})})]})]}),"\n",(0,n.jsx)(s.h2,{id:"stewardship",children:"Stewardship"}),"\n",(0,n.jsxs)(s.p,{children:["The ",(0,n.jsx)("a",{href:"/api/#tag/Stewardship",target:"_blank",children:"stewardship endpoint"})," in combination with ",(0,n.jsx)(s.a,{href:"/docs/develop/access-the-swarm/pinning",children:"pinning"})," can be used to guarantee that important content is always available. It is used for checking whether the content for a Swarm reference is retrievable and for re-uploading the content if it is not."]}),"\n",(0,n.jsxs)(s.p,{children:["An HTTP GET request to the ",(0,n.jsx)(s.code,{children:"stewardship"})," endpoint checks to see whether the content for the specified Swarm reference is retrievable:"]}),"\n",(0,n.jsx)(s.admonition,{type:"info",children:(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"stewardship"})," is not currently supported by Swarm CLI"]})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl "http://localhost:1633/stewardship/c0c2b70b01db8cdfaf114cde176a1e30972b556c7e72d5403bea32e\nc0207136f"\n'})}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-json",children:'{\n  "isRetrievable": true\n}\n'})}),"\n",(0,n.jsx)(s.p,{children:"If the content is not retrievable, an HTTP PUT request can be used to re-upload the content:"}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-bash",children:'curl -X PUT "http://localhost:1633/stewardship/c0c2b70b01db8cdfaf114cde176a1e30972b556c7e72d5403bea32ec0207136f"\n'})}),"\n",(0,n.jsx)(s.p,{children:"Note that for the re-upload to succeed, the associated content must be available locally, either pinned or cached. Since it isn't easy to predict if the content will be cached, for important content pinning is recommended."})]})}function p(e={}){const{wrapper:s}={...(0,t.M)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(o,{...e})}):o(e)}},87768:(e,s,a)=>{a.d(s,{c:()=>i});a(11504);var n=a(65456);const t={tabItem:"tabItem_Ymn6"};var l=a(17624);function i(e){let{children:s,hidden:a,className:i}=e;return(0,l.jsx)("div",{role:"tabpanel",className:(0,n.c)(t.tabItem,i),hidden:a,children:s})}},38888:(e,s,a)=>{a.d(s,{c:()=>y});var n=a(11504),t=a(65456),l=a(53943),i=a(55592),c=a(95288),r=a(10632),h=a(27128),d=a(21148);function m(e){var s,a;return null!=(s=null==(a=n.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:s}=e;return!!s&&"object"==typeof s&&"value"in s}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:a.filter(Boolean))?s:[]}function o(e){const{values:s,children:a}=e;return(0,n.useMemo)((()=>{const e=null!=s?s:function(e){return m(e).map((e=>{let{props:{value:s,label:a,attributes:n,default:t}}=e;return{value:s,label:a,attributes:n,default:t}}))}(a);return function(e){const s=(0,h.w)(e,((e,s)=>e.value===s.value));if(s.length>0)throw new Error('Docusaurus error: Duplicate values "'+s.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[s,a])}function p(e){let{value:s,tabValues:a}=e;return a.some((e=>e.value===s))}function x(e){let{queryString:s=!1,groupId:a}=e;const t=(0,i.Uz)(),l=function(e){let{queryString:s=!1,groupId:a}=e;if("string"==typeof s)return s;if(!1===s)return null;if(!0===s&&!a)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=a?a:null}({queryString:s,groupId:a});return[(0,r._M)(l),(0,n.useCallback)((e=>{if(!l)return;const s=new URLSearchParams(t.location.search);s.set(l,e),t.replace({...t.location,search:s.toString()})}),[l,t])]}function u(e){const{defaultValue:s,queryString:a=!1,groupId:t}=e,l=o(e),[i,r]=(0,n.useState)((()=>function(e){var s;let{defaultValue:a,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(a){if(!p({value:a,tabValues:n}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+a+'" but none of its children has the corresponding value. Available values are: '+n.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return a}const t=null!=(s=n.find((e=>e.default)))?s:n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:s,tabValues:l}))),[h,m]=x({queryString:a,groupId:t}),[u,j]=function(e){let{groupId:s}=e;const a=function(e){return e?"docusaurus.tab."+e:null}(s),[t,l]=(0,d.IN)(a);return[t,(0,n.useCallback)((e=>{a&&l.set(e)}),[a,l])]}({groupId:t}),b=(()=>{const e=null!=h?h:u;return p({value:e,tabValues:l})?e:null})();(0,c.c)((()=>{b&&r(b)}),[b]);return{selectedValue:i,selectValue:(0,n.useCallback)((e=>{if(!p({value:e,tabValues:l}))throw new Error("Can't select invalid tab value="+e);r(e),m(e),j(e)}),[m,j,l]),tabValues:l}}var j=a(93664);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=a(17624);function f(e){let{className:s,block:a,selectedValue:n,selectValue:i,tabValues:c}=e;const r=[],{blockElementScrollPositionUntilNextRender:h}=(0,l.MV)(),d=e=>{const s=e.currentTarget,a=r.indexOf(s),t=c[a].value;t!==n&&(h(s),i(t))},m=e=>{var s;let a=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var n;const s=r.indexOf(e.currentTarget)+1;a=null!=(n=r[s])?n:r[0];break}case"ArrowLeft":{var t;const s=r.indexOf(e.currentTarget)-1;a=null!=(t=r[s])?t:r[r.length-1];break}}null==(s=a)||s.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.c)("tabs",{"tabs--block":a},s),children:c.map((e=>{let{value:s,label:a,attributes:l}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:n===s?0:-1,"aria-selected":n===s,ref:e=>r.push(e),onKeyDown:m,onClick:d,...l,className:(0,t.c)("tabs__item",b.tabItem,null==l?void 0:l.className,{"tabs__item--active":n===s}),children:null!=a?a:s},s)}))})}function N(e){let{lazy:s,children:a,selectedValue:t}=e;const l=(Array.isArray(a)?a:[a]).filter(Boolean);if(s){const e=l.find((e=>e.props.value===t));return e?(0,n.cloneElement)(e,{className:"margin-top--md"}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:l.map(((e,s)=>(0,n.cloneElement)(e,{key:s,hidden:e.props.value!==t})))})}function w(e){const s=u(e);return(0,g.jsxs)("div",{className:(0,t.c)("tabs-container",b.tabList),children:[(0,g.jsx)(f,{...e,...s}),(0,g.jsx)(N,{...e,...s})]})}function y(e){const s=(0,j.c)();return(0,g.jsx)(w,{...e,children:m(e.children)},String(s))}},4552:(e,s,a)=>{a.d(s,{I:()=>c,M:()=>i});var n=a(11504);const t={},l=n.createContext(t);function i(e){const s=n.useContext(l);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),n.createElement(l.Provider,{value:s},e.children)}}}]);