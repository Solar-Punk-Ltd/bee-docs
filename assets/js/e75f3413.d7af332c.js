"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[4248],{35380:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>s,default:()=>h,frontMatter:()=>i,metadata:()=>a,toc:()=>l});var o=t(17624),r=t(4552);const i={title:"Bee API",id:"bee-api"},s=void 0,a={id:"bee/working-with-bee/bee-api",title:"Bee API",description:"The Bee HTTP API is the primary interfaces to a running Bee node. API-endpoints can be queried using familiar HTTP requests, and will respond with semantically accurate HTTP status and error codes as well as data payloads in JSON format where appropriate.",source:"@site/docs/bee/working-with-bee/bee-api.md",sourceDirName:"bee/working-with-bee",slug:"/bee/working-with-bee/bee-api",permalink:"/docs/bee/working-with-bee/bee-api",draft:!1,unlisted:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/bee/working-with-bee/bee-api.md",tags:[],version:"current",frontMatter:{title:"Bee API",id:"bee-api"},sidebar:"bee",previous:{title:"Configuration",permalink:"/docs/bee/working-with-bee/configuration"},next:{title:"Logs and Files",permalink:"/docs/bee/working-with-bee/logs-and-files"}},d={},l=[{value:"Exploring the API",id:"exploring-the-api",level:2},{value:"Inspect Network Topology",id:"inspect-network-topology",level:4},{value:"Debug API Removal Notice",id:"debug-api-removal-notice",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h4:"h4",p:"p",pre:"pre",...(0,r.M)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(n.p,{children:["The Bee HTTP API is the primary interfaces to a running Bee node. API-endpoints can be queried using familiar HTTP requests, and will respond with semantically accurate ",(0,o.jsx)(n.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status",children:"HTTP status and error codes"})," as well as data payloads in ",(0,o.jsx)(n.a,{href:"https://www.json.org/json-en.html",children:"JSON"})," format where appropriate."]}),"\n",(0,o.jsxs)(n.p,{children:["The Bee API-endpoint exposes all functionality to upload and download content to and from the Swarm network. By default, it runs on port ",(0,o.jsx)(n.code,{children:":1633"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["Detailed information about Bee API endpoints can be found in the ",(0,o.jsx)(n.a,{href:"/api/",children:"API reference docs"}),"."]}),"\n",(0,o.jsx)(n.admonition,{type:"danger",children:(0,o.jsxs)(n.p,{children:["Your API should not be exposed to the public Internet, make sure that your network has a firewall which blocks port ",(0,o.jsx)(n.code,{children:"1633"}),". You may also consider using the ",(0,o.jsx)(n.a,{href:"/docs/develop/tools-and-features/gateway-proxy",children:"Gateway Proxy tool"})," to protect your node's API endpoint."]})}),"\n",(0,o.jsx)(n.h2,{id:"exploring-the-api",children:"Exploring the API"}),"\n",(0,o.jsxs)(n.p,{children:["After ",(0,o.jsx)(n.a,{href:"/docs/bee/installation/install",children:"installing"})," and starting up your node, we can begin to understand the node's status by interacting with the API."]}),"\n",(0,o.jsx)(n.p,{children:"First, let's check how many nodes we are currently connected to."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -s http://localhost:1633/peers | jq '.peers | length'\n"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"23\n"})}),"\n",(0,o.jsx)(n.p,{children:"Great! We can see that we are currently connected and sharing data with 23 other nodes!"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["Here we are using the ",(0,o.jsx)(n.code,{children:"jq"})," command line utility to count the amount of objects in the ",(0,o.jsx)(n.code,{children:"peers"})," array in the JSON response we have received from our API, learn more about how to install and use ",(0,o.jsx)(n.code,{children:"jq"})," ",(0,o.jsx)(n.a,{href:"https://stedolan.github.io/jq/",children:"here"}),"."]})}),"\n",(0,o.jsx)(n.h4,{id:"inspect-network-topology",children:"Inspect Network Topology"}),"\n",(0,o.jsxs)(n.p,{children:["We can gain even more insight into how your Bee is becoming a part of\nthe global network using the ",(0,o.jsx)(n.code,{children:"topology"})," endpoint."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"curl -X GET http://localhost:1633/topology | jq\n"})}),"\n",(0,o.jsxs)(n.p,{children:["In this example, our node is beginning to form a healthy network. We hope to see our node adding and\nconnecting to nodes in as many bins as possible. Learn more about proximity order bins and how your\nBee node becomes part of the ordered p2p network in ",(0,o.jsx)(n.a,{href:"https://www.ethswarm.org/the-book-of-swarm-2.pdf",children:"The Book of Swarm"}),"."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "baseAddr": "793cdae71d51b0ffc09fecd1c5b063560150cf2e1d55058bad4a659be5894ab1",\n  "population": 159,\n  "connected": 19,\n  "timestamp": "2020-08-27T19:24:16.451187+01:00",\n  "nnLowWatermark": 2,\n  "depth": 4,\n  "bins": {\n    "bin_0": {\n      "population": 77,\n      "connected": 4,\n      "...": "..."\n    },\n    "bin_1": {\n    \t"population": 37,\n      \t"connected": 4,\n    \t}\n    }\n  }\n}\n'})}),"\n",(0,o.jsxs)(n.p,{children:["To learn more about how to use the API to better understand the state of your node and diagnose problems, see the ",(0,o.jsx)(n.a,{href:"/docs/bee/working-with-bee/troubleshooting/#guide-to-status-related-endpoints",children:"guide to status related endpoints"})," in the troubleshooting section."]}),"\n",(0,o.jsx)(n.h2,{id:"debug-api-removal-notice",children:"Debug API Removal Notice"}),"\n",(0,o.jsx)(n.admonition,{type:"info",children:(0,o.jsxs)(n.p,{children:["The Debug API endpoints have been merged into the Bee API in the Bee version 2.1.0 release, and will be fully removed in the 2.2.0 release. The ",(0,o.jsx)(n.a,{href:"/debug-api/",children:"Debug API reference docs"})," are still available until the 2.2.0 release for your reference."]})})]})}function h(e={}){const{wrapper:n}={...(0,r.M)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},4552:(e,n,t)=>{t.d(n,{I:()=>a,M:()=>s});var o=t(11504);const r={},i=o.createContext(r);function s(e){const n=o.useContext(i);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(i.Provider,{value:n},e.children)}}}]);