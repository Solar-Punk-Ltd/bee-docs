"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[6585],{3905:function(e,t,a){a.d(t,{Zo:function(){return c},kt:function(){return h}});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var d=n.createContext({}),s=function(e){var t=n.useContext(d),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},c=function(e){var t=s(e.components);return n.createElement(d.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,d=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=s(a),m=r,h=u["".concat(d,".").concat(m)]||u[m]||p[m]||i;return a?n.createElement(h,o(o({ref:t},c),{},{components:a})):n.createElement(h,o({ref:t},c))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[u]="string"==typeof e?e:r,o[1]=l;for(var s=2;s<i;s++)o[s]=a[s];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}m.displayName="MDXCreateElement"},49698:function(e,t,a){a.r(t),a.d(t,{assets:function(){return c},contentTitle:function(){return d},default:function(){return h},frontMatter:function(){return l},metadata:function(){return s},toc:function(){return u}});var n=a(87462),r=a(63366),i=(a(67294),a(3905)),o=["components"],l={title:"Erasure Coding",id:"erasure-coding"},d=void 0,s={unversionedId:"develop/access-the-swarm/erasure-coding",id:"develop/access-the-swarm/erasure-coding",title:"Erasure Coding",description:"Erasure coding is an advanced method for safeguarding data, offering robust protection against partial data loss. This technique involves dividing the original data into multiple fragments and generating extra parity fragments to introduce redundancy. A key advantage of erasure coding is its ability to recover the complete original data even if some fragments are lost. Additionally, it offers the flexibility to customize the level of data loss protection, making it a versatile and reliable choice for preserving data integrity on Swarm. You can learn more about erasure coding and the benefits it brings to Swarm in this article on the Swarm blog.",source:"@site/docs/develop/access-the-swarm/erasure-coding.md",sourceDirName:"develop/access-the-swarm",slug:"/develop/access-the-swarm/erasure-coding",permalink:"/docs/develop/access-the-swarm/erasure-coding",draft:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/access-the-swarm/erasure-coding.md",tags:[],version:"current",frontMatter:{title:"Erasure Coding",id:"erasure-coding"},sidebar:"develop",previous:{title:"Upload and Download",permalink:"/docs/develop/access-the-swarm/upload-and-download"},next:{title:"Direct upload",permalink:"/docs/develop/access-the-swarm/direct-upload"}},c={},u=[{value:"Uploading With Erasure Coding",id:"uploading-with-erasure-coding",level:3},{value:"Downloading Erasure Encoded Data",id:"downloading-erasure-encoded-data",level:3}],p={toc:u},m="wrapper";function h(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)(m,(0,n.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"Erasure coding is an advanced method for safeguarding data, offering robust protection against partial data loss. This technique involves dividing the original data into multiple fragments and generating extra parity fragments to introduce redundancy. A key advantage of erasure coding is its ability to recover the complete original data even if some fragments are lost. Additionally, it offers the flexibility to customize the level of data loss protection, making it a versatile and reliable choice for preserving data integrity on Swarm. You can learn more about erasure coding and the benefits it brings to Swarm in ",(0,i.kt)("a",{parentName:"p",href:"https://blog.ethswarm.org/foundation/2023/erasure-coding-supercharges-swarm/"},"this article on the Swarm blog"),".  "),(0,i.kt)("h3",{id:"uploading-with-erasure-coding"},"Uploading With Erasure Coding"),(0,i.kt)("p",null,"Erasure coding is available for the ",(0,i.kt)("a",{parentName:"p",href:"/api/#tag/Bytes"},(0,i.kt)("inlineCode",{parentName:"a"},"/bytes"))," and ",(0,i.kt)("a",{parentName:"p",href:"/api/#tag/BZZ"},(0,i.kt)("inlineCode",{parentName:"a"},"/bzz"))," endpoints, however it is not available for the ",(0,i.kt)("a",{parentName:"p",href:"/api/#tag/Chunk"},(0,i.kt)("inlineCode",{parentName:"a"},"/chunks"))," endpoint which deals with single chunks as erasure coding relies on splitting data into chunks, and in Swarm, a chunk is the smallest unit of data, and cannot be further divided for the purpose of erasure coding. "),(0,i.kt)("p",null,"To upload data to Swarm using erasure coding, the ",(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-level: <integer>")," header is used:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'    curl \\\n        -X POST http://localhost:1633/bzz?name=test.txt \\\n        -H "swarm-redundancy-level: 4" \\\n        -H "swarm-postage-batch-id: 27d1bbef6c01e266d3130c01c9be60fd76b4a69d6f8ea6291548e1644bcf9001" \\\n        -H "Content-Type: text/plain" \n\n    {"reference":"c02e7d943fbc0e753540f377853b7181227a83e773870847765143681511c97d"}\n')),(0,i.kt)("p",null,"The accepted values for the ",(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-level")," header range from the default of 0 up to 4. Each level corresponds to a different level of data protection, with erasure coding turned off at 0, and at its maximum at 4. Each increasing level provides increasing amount of data redundancy offering greater protection against data loss. Each level has been formulated to guarantee against a certain percentage of chunk retrieval errors, shown in the table below. As long as the error rate is below the expected chunk retrieval rate for the given level, there is a less than 1 in a million chance of failure to retrieve the source data."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Redundancy Level"),(0,i.kt)("th",{parentName:"tr",align:null},"Pseudonym"),(0,i.kt)("th",{parentName:"tr",align:null},"Expected Chunk Retrieval Error Rate"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"0"),(0,i.kt)("td",{parentName:"tr",align:null},"None"),(0,i.kt)("td",{parentName:"tr",align:null},"0%")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"1"),(0,i.kt)("td",{parentName:"tr",align:null},"Medium"),(0,i.kt)("td",{parentName:"tr",align:null},"1%")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"2"),(0,i.kt)("td",{parentName:"tr",align:null},"Strong"),(0,i.kt)("td",{parentName:"tr",align:null},"5%")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"3"),(0,i.kt)("td",{parentName:"tr",align:null},"Insane"),(0,i.kt)("td",{parentName:"tr",align:null},"10%")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"4"),(0,i.kt)("td",{parentName:"tr",align:null},"Paranoid"),(0,i.kt)("td",{parentName:"tr",align:null},"50%")))),(0,i.kt)("p",null,"Do take note that any level of erasure encoding will increase the cost of uploaded, as with the additional parity chunks, there is a greater total number of chunks which must be stamped, and as the number of additional parity chunks increase with the redundancy level, so too does the additional cost."),(0,i.kt)("h3",{id:"downloading-erasure-encoded-data"},"Downloading Erasure Encoded Data"),(0,i.kt)("p",null,"When downloading erasure encoded data, there are three related headers which may be used\u2014",(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-strategy"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-fallback-mode: <integer>"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"swarm-chunk-retrieval-timeout"),". "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-strategy"),":  This header allows you to set the retrieval strategy for fetching chunks. The accepted values range from 0 to 3. Each number corresponds to a different chunk retrieval strategy. The numbers stand for the NONE, DATA, PROX and RACE strategies respectively which are described in greater detail in ",(0,i.kt)("a",{parentName:"p",href:"/api/#tag/BZZ/paths/~1bzz~1%7Breference%7D/get"},"the API reference"),". With each increasing level, there will be a potentially greater bandwidth cost. Default is ",(0,i.kt)("inlineCode",{parentName:"p"},"NONE"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"swarm-redundancy-fallback-mode: <boolean>"),": Enables the fallback feature for the redundancy strategies so that if one of the retrieval strategies fails, it will fallback to the more intensive strategy until retrieval is successful or retrieval fails. Default is ",(0,i.kt)("inlineCode",{parentName:"p"},"true"),".")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("inlineCode",{parentName:"p"},"swarm-chunk-retrieval-timeout: <boolean>"),": Allows you to specify the timeout time for chunk retrieval with a default value of 30 seconds. "))),(0,i.kt)("p",null,"An example download request may look something like this:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},'    curl -OJL \\\n    -H "swarm-redundancy-strategy: 2" \\\n    -H "swarm-redundancy-fallback-mode: false" \\\n    -H "swarm-chunk-retrieval-timeout: 50000" \\\n     http://localhost:1633/bzz/c02e7d943fbc0e753540f377853b7181227a83e773870847765143681511c97d/\n\n       % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current\n                                 Dload  Upload   Total   Spent    Left  Speed\n  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0\n')))}h.isMDXComponent=!0}}]);