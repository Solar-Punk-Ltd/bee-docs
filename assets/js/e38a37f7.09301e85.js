"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[9570],{3905:function(e,a,t){t.d(a,{Zo:function(){return c},kt:function(){return h}});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function s(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var u=n.createContext({}),i=function(e){var a=n.useContext(u),t=a;return e&&(t="function"==typeof e?e(a):l(l({},a),e)),t},c=function(e){var a=i(e.components);return n.createElement(u.Provider,{value:a},e.children)},d="mdxType",p={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},m=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,o=e.originalType,u=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=i(t),m=r,h=d["".concat(u,".").concat(m)]||d[m]||p[m]||o;return t?n.createElement(h,l(l({ref:a},c),{},{components:t})):n.createElement(h,l({ref:a},c))}));function h(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var o=t.length,l=new Array(o);l[0]=m;var s={};for(var u in a)hasOwnProperty.call(a,u)&&(s[u]=a[u]);s.originalType=e,s[d]="string"==typeof e?e:r,l[1]=s;for(var i=2;i<o;i++)l[i]=t[i];return n.createElement.apply(null,l)}return n.createElement.apply(null,t)}m.displayName="MDXCreateElement"},85162:function(e,a,t){t.d(a,{Z:function(){return l}});var n=t(67294),r=t(86010),o={tabItem:"tabItem_Ymn6"};function l(e){var a=e.children,t=e.hidden,l=e.className;return n.createElement("div",{role:"tabpanel",className:(0,r.Z)(o.tabItem,l),hidden:t},a)}},74866:function(e,a,t){t.d(a,{Z:function(){return g}});var n=t(87462),r=t(67294),o=t(86010),l=t(12466),s=t(16550),u=t(91980),i=t(67392),c=t(50012);function d(e){return function(e){var a,t;return null!=(a=null==(t=r.Children.map(e,(function(e){if(!e||(0,r.isValidElement)(e)&&(a=e.props)&&"object"==typeof a&&"value"in a)return e;var a;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:t.filter(Boolean))?a:[]}(e).map((function(e){var a=e.props;return{value:a.value,label:a.label,attributes:a.attributes,default:a.default}}))}function p(e){var a=e.values,t=e.children;return(0,r.useMemo)((function(){var e=null!=a?a:d(t);return function(e){var a=(0,i.l)(e,(function(e,a){return e.value===a.value}));if(a.length>0)throw new Error('Docusaurus error: Duplicate values "'+a.map((function(e){return e.value})).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[a,t])}function m(e){var a=e.value;return e.tabValues.some((function(e){return e.value===a}))}function h(e){var a=e.queryString,t=void 0!==a&&a,n=e.groupId,o=(0,s.k6)(),l=function(e){var a=e.queryString,t=void 0!==a&&a,n=e.groupId;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,u._X)(l),(0,r.useCallback)((function(e){if(l){var a=new URLSearchParams(o.location.search);a.set(l,e),o.replace(Object.assign({},o.location,{search:a.toString()}))}}),[l,o])]}function f(e){var a,t,n,o,l=e.defaultValue,s=e.queryString,u=void 0!==s&&s,i=e.groupId,d=p(e),f=(0,r.useState)((function(){return function(e){var a,t=e.defaultValue,n=e.tabValues;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!m({value:t,tabValues:n}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+t+'" but none of its children has the corresponding value. Available values are: '+n.map((function(e){return e.value})).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return t}var r=null!=(a=n.find((function(e){return e.default})))?a:n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:l,tabValues:d})})),b=f[0],w=f[1],y=h({queryString:u,groupId:i}),k=y[0],v=y[1],g=(a=function(e){return e?"docusaurus.tab."+e:null}({groupId:i}.groupId),t=(0,c.Nk)(a),n=t[0],o=t[1],[n,(0,r.useCallback)((function(e){a&&o.set(e)}),[a,o])]),N=g[0],I=g[1],T=function(){var e=null!=k?k:N;return m({value:e,tabValues:d})?e:null}();return(0,r.useLayoutEffect)((function(){T&&w(T)}),[T]),{selectedValue:b,selectValue:(0,r.useCallback)((function(e){if(!m({value:e,tabValues:d}))throw new Error("Can't select invalid tab value="+e);w(e),v(e),I(e)}),[v,I,d]),tabValues:d}}var b=t(72389),w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){var a=e.className,t=e.block,s=e.selectedValue,u=e.selectValue,i=e.tabValues,c=[],d=(0,l.o5)().blockElementScrollPositionUntilNextRender,p=function(e){var a=e.currentTarget,t=c.indexOf(a),n=i[t].value;n!==s&&(d(a),u(n))},m=function(e){var a,t=null;switch(e.key){case"Enter":p(e);break;case"ArrowRight":var n,r=c.indexOf(e.currentTarget)+1;t=null!=(n=c[r])?n:c[0];break;case"ArrowLeft":var o,l=c.indexOf(e.currentTarget)-1;t=null!=(o=c[l])?o:c[c.length-1]}null==(a=t)||a.focus()};return r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.Z)("tabs",{"tabs--block":t},a)},i.map((function(e){var a=e.value,t=e.label,l=e.attributes;return r.createElement("li",(0,n.Z)({role:"tab",tabIndex:s===a?0:-1,"aria-selected":s===a,key:a,ref:function(e){return c.push(e)},onKeyDown:m,onClick:p},l,{className:(0,o.Z)("tabs__item",w.tabItem,null==l?void 0:l.className,{"tabs__item--active":s===a})}),null!=t?t:a)})))}function k(e){var a=e.lazy,t=e.children,n=e.selectedValue,o=(Array.isArray(t)?t:[t]).filter(Boolean);if(a){var l=o.find((function(e){return e.props.value===n}));return l?(0,r.cloneElement)(l,{className:"margin-top--md"}):null}return r.createElement("div",{className:"margin-top--md"},o.map((function(e,a){return(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==n})})))}function v(e){var a=f(e);return r.createElement("div",{className:(0,o.Z)("tabs-container",w.tabList)},r.createElement(y,(0,n.Z)({},e,a)),r.createElement(k,(0,n.Z)({},e,a)))}function g(e){var a=(0,b.Z)();return r.createElement(v,(0,n.Z)({key:String(a)},e))}},57655:function(e,a,t){t.r(a),t.d(a,{assets:function(){return p},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return i},metadata:function(){return d},toc:function(){return m}});var n=t(87462),r=t(63366),o=(t(67294),t(3905)),l=t(74866),s=t(85162),u=["components"],i={title:"Upload and Download Files",id:"upload-and-download"},c=void 0,d={unversionedId:"develop/access-the-swarm/upload-and-download",id:"develop/access-the-swarm/upload-and-download",title:"Upload and Download Files",description:"When you upload your files to the swarm, they are split into 4kb",source:"@site/docs/develop/access-the-swarm/upload-and-download.md",sourceDirName:"develop/access-the-swarm",slug:"/develop/access-the-swarm/upload-and-download",permalink:"/docs/develop/access-the-swarm/upload-and-download",draft:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/develop/access-the-swarm/upload-and-download.md",tags:[],version:"current",frontMatter:{title:"Upload and Download Files",id:"upload-and-download"},sidebar:"develop",previous:{title:"Buy a Batch of Stamps",permalink:"/docs/develop/access-the-swarm/buy-a-stamp-batch"},next:{title:"Upload a Directory",permalink:"/docs/develop/access-the-swarm/upload-a-directory"}},p={},m=[{value:"Overview",id:"overview",level:2},{value:"Purchasing Your Batch of Stamps",id:"purchasing-your-batch-of-stamps",level:2},{value:"Upload",id:"upload",level:3},{value:"API",id:"api",level:4},{value:"Swarm CLI",id:"swarm-cli",level:4},{value:"Download",id:"download",level:2},{value:"API",id:"api-1",level:4},{value:"Swarm CLI",id:"swarm-cli-1",level:4},{value:"Public Gateways",id:"public-gateways",level:2}],h={toc:m},f="wrapper";function b(e){var a=e.components,t=(0,r.Z)(e,u);return(0,o.kt)(f,(0,n.Z)({},h,t,{components:a,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"When you upload your files to the swarm, they are split into 4kb\n",(0,o.kt)("em",{parentName:"p"},"chunks")," and then distributed to nodes in the network that are\nresponsible for storing and serving these parts of your content. Each\nchunk has a ",(0,o.kt)("em",{parentName:"p"},"postage stamp")," stuck to it which attaches a value in xBZZ\nto that chunk which you agree to ",(0,o.kt)("em",{parentName:"p"},"burn")," when buying the batch of stamps. This\nsignifies to storage nodes that this data is important, and supposed\nto be retained in the Distributable Immutable Store of Chunks\n(",(0,o.kt)("em",{parentName:"p"},"DISC"),")."),(0,o.kt)("h2",{id:"overview"},"Overview"),(0,o.kt)("p",null,"To upload data to the swarm, you must perform the following steps:"),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},"Fund your node's wallet with xBZZ."),(0,o.kt)("li",{parentName:"ol"},"Purchase a ",(0,o.kt)("em",{parentName:"li"},"batch")," of stamps with your xBZZ."),(0,o.kt)("li",{parentName:"ol"},"Wait for the batch to propogate into the network."),(0,o.kt)("li",{parentName:"ol"},"Upload your content, specifying the ",(0,o.kt)("em",{parentName:"li"},"batch id")," so that Bee can attach stamps to your chunks."),(0,o.kt)("li",{parentName:"ol"},"Download your content using your content's hash.")),(0,o.kt)("h2",{id:"purchasing-your-batch-of-stamps"},"Purchasing Your Batch of Stamps"),(0,o.kt)("p",null,"In order to upload your data to swarm, you must agree to burn (spend)\nsome of your xBZZ to signify to storer and fowarder nodes that this\ncontent is valued. Before you proceed to the next step, you must buy\nstamps! See this guide on how to ",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/access-the-swarm/buy-a-stamp-batch"},"purchase an appropriate batch of\nstamps"),"."),(0,o.kt)("h3",{id:"upload"},"Upload"),(0,o.kt)("p",null,"Once your Bee node is running, a HTTP API is enabled for you to interact with. The command line utility ",(0,o.kt)("a",{parentName:"p",href:"https://ec.haxx.se/http/http-multipart"},"curl")," is a great way to interact with a Bee node's API. Swarm CLI alternative commands are also included as a more user-friendly way of interacting with your Bee node's API."),(0,o.kt)(l.Z,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"api",mdxType:"TabItem"},(0,o.kt)("h4",{id:"api"},"API"),(0,o.kt)("p",null,"First, let's check to see if the API is running as expected..."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl http://localhost:1633\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Ethereum Swarm Bee\n")),(0,o.kt)("p",null,"Once running, a file can be uploaded by making an HTTP POST request to the ",(0,o.kt)("inlineCode",{parentName:"p"},"files")," endpoint of the Bee API."),(0,o.kt)("p",null,"Here, you must specify your ",(0,o.kt)("em",{parentName:"p"},"Batch ID")," in the ",(0,o.kt)("inlineCode",{parentName:"p"},"Swarm-Postage-Batch-Id")," header as follows."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl --data-binary "@bee.jpg" -H "Swarm-Postage-Batch-Id: 78a26be9b42317fe6f0cbea3e47cbd0cf34f533db4e9c91cf92be40eb2968264"   http://localhost:1633/bzz\n')),(0,o.kt)("p",null,"We may also pass the appropriate mime type in the ",(0,o.kt)("inlineCode",{parentName:"p"},"Content-Type")," header, and a file name to the ",(0,o.kt)("inlineCode",{parentName:"p"},"name")," query parameter so that the file will be correctly handled by web browsers and other applications."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},'curl --data-binary "@bee.jpg" -H "Swarm-Postage-Batch-Id: 78a26be9b42317fe6f0cbea3e47cbd0cf34f533db4e9c91cf92be40eb2968264" -H "Content-Type: image/jpg" http://localhost:1633/bzz\n')),(0,o.kt)("admonition",{type:"danger"},(0,o.kt)("p",{parentName:"admonition"},"Data uploaded to the swarm is always public. In Swarm, sensitive files\nmust be ",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/access-the-swarm/store-with-encryption"},"encrypted"),"\nbefore uploading to ensure their contents always remains private.")),(0,o.kt)("p",null,"When succesful, a JSON formatted response will be returned, containing\na ",(0,o.kt)("strong",{parentName:"p"},"swarm reference")," or ",(0,o.kt)("strong",{parentName:"p"},"hash")," which is the ",(0,o.kt)("em",{parentName:"p"},"address")," of the\nuploaded file, for example:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "reference": "22cbb9cedca08ca8d50b0319a32016174ceb8fbaa452ca5f0a77b804109baa00"\n}\n')),(0,o.kt)("p",null,"Keep this ",(0,o.kt)("em",{parentName:"p"},"address")," safe, as we'll use it to retrieve our content later on.")),(0,o.kt)(s.Z,{value:"swarm-cli",mdxType:"TabItem"},(0,o.kt)("h4",{id:"swarm-cli"},"Swarm CLI"),(0,o.kt)("p",null,"We have a ",(0,o.kt)("inlineCode",{parentName:"p"},"test.txt")," file we wish to upload, let's check its contents."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat test.txt\nThis is a test file\nIt will be used to test uploading and downloading from Swarm\n")),(0,o.kt)("p",null,"Check that our node is operating normally.  "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"swarm-cli status\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Bee\nAPI: http://localhost:1633 [OK]\nDebug API: http://localhost:1635 [OK]\nVersion: 1.17.5-50fcec7b\nMode: full\n\nTopology\nConnected Peers: 175\nPopulation: 13614\nDepth: 9\n\nWallet\nxBZZ: 85.5638752768932272\nxDAI: 4.753393401487287091\n\nChequebook\nAvailable xBZZ: 0.0000000000018\nTotal xBZZ: 0.0000000000018\n\nStaking\nStaked BZZ: 10\n\nRedistribution\nReward: 831386836533248000\nHas sufficient funds: true\nFully synced: true\nFrozen: false\nLast selected round: 202266\nLast played round: 202266\nLast won round: 186776\nMinimum gas funds: 101250000000000000\n")),(0,o.kt)("p",null,"List our stamps."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"swarm-cli stamp list\n")),(0,o.kt)("p",null,"Copy the ID of the stamp we wish to use."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Stamp ID: daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\nUsage: 7%\nRemaining Capacity: 7.50 GB\nTTL: 91 days 1 hour 45 minutes 28 seconds\nExpires: 2024-02-01\n")),(0,o.kt)("p",null,"Use the stamp ID to upload our file."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"swarm-cli upload test.txt --stamp daa8c5b36e1cf481b10118a8b02430a6f22618deaa6ba5aa4ea660de66aa62db\n")),(0,o.kt)("p",null,"If successful, we will receive the hash of the uploaded file and the URL where it is reachable."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"Swarm hash: 1ffd2b67c8f34596a0b8375be29423c2d47e7995fcac8dd83fbd34e3d839b5a2\nURL: http://localhost:1633/bzz/1ffd2b67c8f34596a0b8375be29423c2d47e7995fcac8dd83fbd34e3d839b5a2/\nStamp ID: daa8c5b3\nUsage: 7%\nRemaining Capacity: 7.50 GB \n")),(0,o.kt)("p",null,"Let's check that the file is downloadable."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"swarm-cli download 1ffd2b67c8f34596a0b8375be29423c2d47e7995fcac8dd83fbd34e3d839b5a2\ntest.txt OK\n")),(0,o.kt)("p",null,"And let's confirm that the contents of the file are correct."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat test.txt\nThis is a test file\nIt will be used to test uploading and downloading from Swarm\n")))),(0,o.kt)("p",null,"In Swarm, every piece of data has a unique ",(0,o.kt)("em",{parentName:"p"},"address")," which is a unique and reproducible cryptographic hash digest. If you upload the same file twice, you will always receive the same hash. This makes working with data in Swarm super secure!"),(0,o.kt)("admonition",{type:"info"},(0,o.kt)("p",{parentName:"admonition"},"If you are uploading a large file it is useful to track the status of your upload as it is processed into the network. To improve the user experience, learn how to ",(0,o.kt)("a",{parentName:"p",href:"/docs/develop/access-the-swarm/syncing"},"follow the status of your upload"),"."),(0,o.kt)("p",{parentName:"admonition"},"Once your file has been ",(0,o.kt)("strong",{parentName:"p"},"completely synced with the network"),", you will be able to turn off your computer and other nodes will take over to serve the data for you!")),(0,o.kt)("h2",{id:"download"},"Download"),(0,o.kt)("p",null,"Once your file is uploaded to Swarm it can be easily downloaded. "),(0,o.kt)(l.Z,{defaultValue:"api",values:[{label:"API",value:"api"},{label:"Swarm CLI",value:"swarm-cli"}],mdxType:"Tabs"},(0,o.kt)(s.Z,{value:"api",mdxType:"TabItem"},(0,o.kt)("h4",{id:"api-1"},"API"),(0,o.kt)("p",null,"Uploaded files can be retrieved with a simple HTTP GET request."),(0,o.kt)("p",null,"Substitute the ",(0,o.kt)("em",{parentName:"p"},"hash")," in the last part of the URL with the reference\nto your own data."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"curl -OJL http://localhost:1633/bzz/042d4fe94b946e2cb51196a8c136b8cc335156525bf1ad7e86356c2402291dd4/\n")),(0,o.kt)("p",null,"You may even simply navigate to the URL in your browser:"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"http://localhost:1633/bzz/22cbb9cedca08ca8d50b0319a32016174ceb8fbaa452ca5f0a77b804109baa00"},"http://localhost:1633/bzz/22cb...aa00"))),(0,o.kt)(s.Z,{value:"swarm-cli",mdxType:"TabItem"},(0,o.kt)("h4",{id:"swarm-cli-1"},"Swarm CLI"),(0,o.kt)("p",null,"Simply use the ",(0,o.kt)("inlineCode",{parentName:"p"},"swarm-cli download")," command followed by the hash of the file you wish to download. "),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"swarm-cli download 1ffd2b67c8f34596a0b8375be29423c2d47e7995fcac8dd83fbd34e3d839b5a2\ntest.txt OK\n")),(0,o.kt)("p",null,"And let's print out the file contents to confirm it was downloaded properly."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"cat test.txt\nThis is a test file\nIt will be used to test uploading and downloading from Swarm\n")))),(0,o.kt)("h2",{id:"public-gateways"},"Public Gateways"),(0,o.kt)("p",null,"To share files with someone who isn't running a Bee node yet, simply change the host in the link to be one of our public gateways. Send the link to your friends, and they will be able to download the file too!"),(0,o.kt)("p",null,(0,o.kt)("a",{parentName:"p",href:"https://download.gateway.ethswarm.org/bzz/22cbb9cedca08ca8d50b0319a32016174ceb8fbaa452ca5f0a77b804109baa00/"},"https://download.gateway.ethswarm.org/bzz/22cb...aa00/")))}b.isMDXComponent=!0}}]);