"use strict";(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[1508],{63948:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var r=o(17624),s=o(4552);const t={title:"Bee Using Docker",id:"docker"},c=void 0,i={id:"bee/installation/docker",title:"Bee Using Docker",description:"Docker containers for Bee are hosted at Docker Hub for your convenience.",source:"@site/docs/bee/installation/docker.md",sourceDirName:"bee/installation",slug:"/bee/installation/docker",permalink:"/docs/bee/installation/docker",draft:!1,unlisted:!1,editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/bee/installation/docker.md",tags:[],version:"current",frontMatter:{title:"Bee Using Docker",id:"docker"},sidebar:"bee",previous:{title:"Hive",permalink:"/docs/bee/installation/hive"},next:{title:"Connectivity",permalink:"/docs/bee/installation/connectivity"}},a={},d=[{value:"Quick Start",id:"quick-start",level:3},{value:"Versions",id:"versions",level:3},{value:"Specific Versions",id:"specific-versions",level:4},{value:"Using Tags",id:"using-tags",level:4},{value:"Docker Compose",id:"docker-compose",level:3},{value:"Setup",id:"setup",level:4}];function l(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h3:"h3",h4:"h4",p:"p",pre:"pre",...(0,s.M)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(n.p,{children:["Docker containers for Bee are hosted at ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/ethersphere/bee",children:"Docker Hub"})," for your convenience."]}),"\n",(0,r.jsx)(n.h3,{id:"quick-start",children:"Quick Start"}),"\n",(0,r.jsx)(n.p,{children:"Try Bee out by simply running the following command in your terminal."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run \\\n  -p 1635:1635 \\\n  -p 1634:1634 \\\n  -p 1633:1633 \\\n  --rm -it ethersphere/bee:stable \\\n  start \\\n    --welcome-message="Bzzzz bzzz bzz bzz. \ud83d\udc1d" \\\n    --blockchain-rpc-endpoint http://localhost:8545 \\\n    --debug-api-enable\n'})}),"\n",(0,r.jsx)(n.admonition,{type:"info",children:(0,r.jsxs)(n.p,{children:["If starting your node for the first time, you will need to deploy a chequebook contract. See ",(0,r.jsx)(n.a,{href:"/docs/bee/installation/install",children:"installation"})," section for more info."]})}),"\n",(0,r.jsxs)(n.p,{children:["To persist files, mount a local directory as follows and enter the password used to encrypt your keyfiles. Note, ",(0,r.jsx)(n.code,{children:"docker"})," insists on absolute paths when mounting volumes, so you must replace ",(0,r.jsx)(n.code,{children:"/path/to/.bee-docker"})," with a valid path from your local filesystem."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run \\\n  -v /path/to/.bee-docker:/home/bee/.bee \\\n  -p 1635:1635 \\\n  -p 1634:1634 \\\n  -p 1633:1633 \\\n  --rm -it ethersphere/bee:stable \\\n  start \\\n    --welcome-message="Bzzzz bzzz bzz bzz. \ud83d\udc1d" \\\n    --blockchain-rpc-endpoint https://gno.getblock.io/<<your-api-key>>/mainnet/ \\\n\t  --debug-api-enable\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Once you have generated your keys, use the ",(0,r.jsx)(n.code,{children:"-d"})," flag to run in detached mode and leave Bee running in the background:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'docker run \\\n  -d\n  -v /path/to/.bee-docker:/home/bee/.bee\\\n  -p 1635:1635 \\\n  -p 1634:1634 \\\n  -p 1633:1633 \\\n  --rm -it ethersphere/bee:stable \\\n  start \\\n    --welcome-message="Bzzzz bzzz bzz bzz. \ud83d\udc1d" \\\n    --blockchain-rpc-endpoint https://gno.getblock.io/<<your-api-key>>/mainnet/ \\\n\t  --debug-api-enable\n'})}),"\n",(0,r.jsx)(n.h3,{id:"versions",children:"Versions"}),"\n",(0,r.jsx)(n.p,{children:"In order to avoid accidentally upgrading your Bee containers, or deadlocks resulting from Docker caching solutions, it is recommended to use best practices and pin the specific version of Bee that you want to run."}),"\n",(0,r.jsx)(n.h4,{id:"specific-versions",children:"Specific Versions"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker pull ethersphere/bee:1.18.2\n"})}),"\n",(0,r.jsx)(n.h4,{id:"using-tags",children:"Using Tags"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker pull ethersphere/bee:beta\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You may use the tags ",(0,r.jsx)(n.code,{children:"beta"}),", ",(0,r.jsx)(n.code,{children:"latest"}),", and ",(0,r.jsx)(n.code,{children:"stable"}),", or find out more\nat the ",(0,r.jsx)(n.a,{href:"https://hub.docker.com/r/ethersphere/bee",children:"Docker Hub repository"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"docker-compose",children:"Docker Compose"}),"\n",(0,r.jsx)(n.p,{children:"Configuration files for Bee are provided to enable quick\nand easy installation with persistent storage and\nsecure secret management."}),"\n",(0,r.jsx)(n.h4,{id:"setup",children:"Setup"}),"\n",(0,r.jsxs)(n.p,{children:["First, retrieve the current ",(0,r.jsx)(n.code,{children:"docker-compose.yaml"})," file."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget -q https://raw.githubusercontent.com/ethersphere/bee/v1.18.2/packaging/docker/docker-compose.yml\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Next, create a ",(0,r.jsx)(n.code,{children:".env"})," file using the example file provided. This file will be responsible for storing configuration and secrets for our Bee node(s)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"wget -q https://raw.githubusercontent.com/ethersphere/bee/v1.18.2/packaging/docker/env -O .env\n"})}),"\n",(0,r.jsxs)(n.p,{children:["There are some important configuration parameters which must be set in order for our projects to work. To affect configuration in the ",(0,r.jsx)(n.code,{children:".env"})," file, we first remove the ",(0,r.jsx)(n.code,{children:"#"})," at the beginning of the line and then change the value after ",(0,r.jsx)(n.code,{children:"="})," to our desired config."]}),"\n",(0,r.jsx)(n.p,{children:"For Bee, amend the following parameters:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"BEE_BLOCKCHAIN_RPC_ENDPOINT=https://gno.getblock.io/<<your-api-key>>/mainnet/\nBEE_PASSWORD=my-password\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\nWith the configuration settings complete, you can start your Bee node(s) by running:\n\n```bash\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.p,{children:["By specifying the ",(0,r.jsx)(n.code,{children:"-d"})," flag to ",(0,r.jsx)(n.code,{children:"docker-compose"})," we run Bee in detached mode so that it continues running in the background."]})}),"\n",(0,r.jsx)(n.admonition,{type:"warning",children:(0,r.jsxs)(n.p,{children:["Docker Compose will create a Docker volume called ",(0,r.jsx)(n.code,{children:"bee"})," containing important key material. Make sure to ",(0,r.jsx)(n.a,{href:"/docs/bee/working-with-bee/backups",children:"backup"})," the contents of your Docker volume!"]})}),"\n",(0,r.jsxs)(n.p,{children:["To determine the Bee node's address to fund, we can check the logs for our Bee ",(0,r.jsx)(n.em,{children:"container"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker-compose logs -f bee-1\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'bee_1 | time="2020-12-15T18:43:14Z" level=warning msg="cannot continue until there is sufficient ETH (for Gas) and at least 1 xBZZ available on 7a977fa660e2e93e1eba40030c6b8da68d01971e"\ntime="2020-12-15T18:43:14Z" level=warning msg="learn how to fund your node by visiting our docs at https://docs.ethswarm.org/docs/bee/installation/fund-your-node"\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Once you have determined your Bee's Ethereum addresses,\n",(0,r.jsx)(n.a,{href:"/docs/bee/installation/fund-your-node",children:"fund your node"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"After your transaction has been completed, your node should recognise that your wallet has been funded, and begin to deploy and fund your Bee chequebook!"}),"\n",(0,r.jsxs)(n.p,{children:["Once Bee has completed this procedure, you may query the Bee ",(0,r.jsx)(n.a,{href:"/docs/api-reference/",children:"HTTP API"})," at ",(0,r.jsx)(n.code,{children:"http://localhost:1633"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl localhost:1633\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Ethereum Swarm Bee\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Once you start seeing messages in the ",(0,r.jsx)(n.code,{children:"docker-compose logs -f bee-1"}),"\nlike:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"successfully connected to peer 7fa40ce124d69ecf14d6f7806faaf9df5d639d339a9d343aa7004373f5c46b8f (outbound)\n"})}),"\n",(0,r.jsxs)(n.p,{children:["You're connected to the Swarm. Let's do a quick check to find out how\nmany peers we have using the ",(0,r.jsx)(n.code,{children:"curl"})," command line utility:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"curl localhost:1635/peers\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "peers": [\n    {\n      "address": "339cf2ca75f154ffb8dd13de024c4a5c5b53827b8fd21f24bec05835e0cdc2e8"\n    },\n    {\n      "address": "b4e5df012cfc281e74bb517fcf87fc2c07cd787929c332fc805f8124401fabae"\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.p,{children:"If you see peers listed here - congratulations! You have joined the swarm! Welcome! \ud83d\udc1d"})]})}function h(e={}){const{wrapper:n}={...(0,s.M)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(l,{...e})}):l(e)}},4552:(e,n,o)=>{o.d(n,{I:()=>i,M:()=>c});var r=o(11504);const s={},t=r.createContext(s);function c(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);