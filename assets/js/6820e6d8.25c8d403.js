(self.webpackChunkbee_docs=self.webpackChunkbee_docs||[]).push([[410],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return p},kt:function(){return m}});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var u=r.createContext({}),l=function(e){var t=r.useContext(u),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return r.createElement(u.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,u=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=l(n),m=a,g=d["".concat(u,".").concat(m)]||d[m]||c[m]||o;return n?r.createElement(g,i(i({ref:t},p),{},{components:n})):r.createElement(g,i({ref:t},p))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var u in t)hasOwnProperty.call(t,u)&&(s[u]=t[u]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},5615:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return s},metadata:function(){return u},toc:function(){return l},default:function(){return c}});var r=n(2122),a=n(9756),o=(n(7294),n(3905)),i=["components"],s={title:"Upgrading Bee",id:"upgrading-bee"},u={unversionedId:"working-with-bee/upgrading-bee",id:"working-with-bee/upgrading-bee",isDocsHomePage:!1,title:"Upgrading Bee",description:"Keep a close eye on the",source:"@site/docs/working-with-bee/upgrade.md",sourceDirName:"working-with-bee",slug:"/working-with-bee/upgrading-bee",permalink:"/docs/working-with-bee/upgrading-bee",editUrl:"https://github.com/ethersphere/docs.github.io/blob/master/docs/working-with-bee/upgrade.md",version:"current",frontMatter:{title:"Upgrading Bee",id:"upgrading-bee"},sidebar:"Balls",previous:{title:"Backups",permalink:"/docs/working-with-bee/backups"},next:{title:"Uninstalling Bee",permalink:"/docs/working-with-bee/uninstalling-bee"}},l=[{value:"Upgrade Procedure",id:"upgrade-procedure",children:[{value:"Ubuntu / Debian / Raspbian",id:"ubuntu--debian--raspbian",children:[]},{value:"Upgrading from a mainnet v1.4.x series to a mainnet v1.5.x series",id:"upgrading-from-a-mainnet-v14x-series-to-a-mainnet-v15x-series",children:[]}]}],p={toc:l};function c(e){var t=e.components,n=(0,a.Z)(e,i);return(0,o.kt)("wrapper",(0,r.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Keep a close eye on the\n",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/vQcngMzZ9c"},"#bee-node-updates")," channel in our\n",(0,o.kt)("a",{parentName:"p",href:"https://discord.gg/wdghaQsGq5"},"Discord Server")," for information on the\nlatest software updates for Bee. It's very important to keep Bee up to\ndate to benefit from security updates and ensure you are able to\nproperly interact with the swarm."),(0,o.kt)("h2",{id:"upgrade-procedure"},"Upgrade Procedure"),(0,o.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Bee sure to ",(0,o.kt)("a",{parentName:"p",href:"/docs/working-with-bee/backups"},"backup")," your clef key material and ",(0,o.kt)("a",{parentName:"p",href:"/docs/working-with-bee/cashing-out"},"cashout your cheques")," to make sure your BZZs are safe before applying updates."))),(0,o.kt)("h3",{id:"ubuntu--debian--raspbian"},"Ubuntu / Debian / Raspbian"),(0,o.kt)("p",null,"To upgrade Bee, simply stop the Bee and Bee-clef services."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl stop bee\nsudo systemctl stop bee-clef\n")),(0,o.kt)("p",null,"Now follow the ",(0,o.kt)("a",{parentName:"p",href:"/docs/installation/install"},"installation instructions")," to download the new package and install the new version, as you would during a new installation."),(0,o.kt)("p",null,"You will be greeted by the following prompt:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"Configuration file '/etc/bee/bee.yaml'\n ==> Modified (by you or by a script) since installation.\n ==> Package distributor has shipped an updated version.\n   What would you like to do about it ?  Your options are:\n    Y or I  : install the package maintainer's version\n    N or O  : keep your currently-installed version\n      D     : show the differences between the versions\n      Z     : start a shell to examine the situation\n The default action is to keep your current version.\n*** bee.yaml (Y/I/N/O/D/Z) [default=N] ?\n")),(0,o.kt)("p",null,"Select ",(0,o.kt)("inlineCode",{parentName:"p"},"N")," to keep your current data and keys."),(0,o.kt)("p",null,"You may now start your node again, waiting for bee-clef to initialise before starting Bee."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"sudo systemctl start bee-clef\nsleep 30\nsudo systemctl start bee\n")),(0,o.kt)("h4",{id:"manual-installations"},"Manual Installations"),(0,o.kt)("p",null,"To upgrade your manual installation, simply stop Bee, replace the Bee binary and restart."),(0,o.kt)("h4",{id:"docker"},"Docker"),(0,o.kt)("p",null,"To upgrade your docker installation, simply increment the version number in your configurations and restart."),(0,o.kt)("h3",{id:"upgrading-from-a-mainnet-v14x-series-to-a-mainnet-v15x-series"},"Upgrading from a mainnet v1.4.x series to a mainnet v1.5.x series"),(0,o.kt)("p",null,"Bee v1.5.1 contains a completely new data storage format called Sharky."),(0,o.kt)("p",null,"As part of these changes, existing data must be migrated to the new data structure expected by\nthe 1.5.x client. This will happen automatically, but ",(0,o.kt)("strong",{parentName:"p"},"may require extra space")," and cause a spike in cpu requirements for the duration of the migration."),(0,o.kt)("p",null,"If you can not accomodate approximately 3x (2x might even be enough) as much disk space as is currently being used by your Bee ",(0,o.kt)("inlineCode",{parentName:"p"},"datadir"),", you may want to run ",(0,o.kt)("inlineCode",{parentName:"p"},"bee db nuke")," before upgrading (but after stopping the Bee service) to resync your nodes content from the network. If you have ",(0,o.kt)("strong",{parentName:"p"},"locally pinned content")," please ensure you have a local backup so that you can restamp and restore it to the network in case of disaster."))}c.isMDXComponent=!0}}]);